(window["webpackJsonpfuse-react-app"]=window["webpackJsonpfuse-react-app"]||[]).push([[14],{566:function(e,t,a){"use strict";var r=a(35),n=a.n(r),o=a(38),i=a(14),c="[CARD APP] VALIDATING",l="[CARD APP] SET_PRODUCTS",s="[CARD APP] EXCHANGING",u="[CARD APP] EXCHANGED",p="[CARD APP] CLEAR";function d(e,t){return function(a,r){a(b()),a(g(!0)),a(m(!1)),a(y(!1)),n.a.post("".concat(o.b.url,"/api/provider/card/validate"),{card:e,cvv:t}).then(function(e){a(g(!1)),200===e.data.code?(a(i.j({message:e.data.message,variant:"success"})),a({type:l,payload:e.data.result})):a(i.j({message:e.data.message,variant:"error"}))})}}function f(e,t,a){return function(r,c){r(m(!0)),r(y(!1)),n.a.post("".concat(o.b.url,"/api/provider/card/exchange"),{card:e,cvv:t,product_id:a}).then(function(e){r(m(!1)),200===e.data.code?(r(y(!0)),r(i.j({message:e.data.message,variant:"success"}))):r(i.j({message:e.data.message,variant:"error"}))})}}function g(e){return{type:c,payload:e}}function m(e){return{type:s,payload:e}}function y(e){return{type:u,payload:e}}function b(){return{type:p,payload:[]}}a(4);var h="[CARD APP] GET_CARD_HISTORIES",v="[CARD APP] CARD_HISTORIES_CHANGE_PAGE",_="[CARD APP] CARD_HISTORIES_INFO",O="[CARD APP] LOADING_CARD_HISTORIES",P="[CARD APP]  LOADING_CARD_HISTORY_INFO",E="[CARD APP]  LOADING_METHOD_CREATE";function j(e){return function(t){var a={"page[number]":e.current_page};e.filters&&e.filters.forEach(function(e){var t="filter["+e.value.filterType+"-"+e.id+"]",r=e.value.filterValue;r.length>0&&(a[t]=r)}),n.a.get("".concat(o.b.url,"/api/provider/card/histories"),{params:a}).then(function(e){t({type:h,payload:e.data.result}),t(F(!1))})}}function A(e){return{type:v,payload:e}}function F(e){return{type:O,payload:e}}var C="[CARD APP] GET_CARD_PAYMENT_REQUESTS",D="[CARD APP] CARD_PAYMENT_REQUESTS_CHANGE_PAGE",w="[CARD APP] CARD_PAYMENT_REQUESTS_INFO",N="[CARD APP] LOADING_CARD_PAYMENT_REQUESTS";function S(){return function(e,t){n.a.get("".concat(o.b.url,"/api/provider/card/payment/request-info")).then(function(t){200===t.data.code?e({type:w,payload:t.data.result}):e(i.j({message:t.data.message,variant:"error"}))})}}function R(e){return function(t){var a={"page[number]":e.current_page};e.filters&&e.filters.forEach(function(e){var t="filter["+e.value.filterType+"-"+e.id+"]",r=e.value.filterValue;r.length>0&&(a[t]=r)}),n.a.get("".concat(o.b.url,"/api/provider/card/payment/pending-cards"),{params:a}).then(function(e){t({type:C,payload:e.data.result}),t(T(!1))})}}function I(e,t){return function(a,r){a(T(!0));var c=r().CardApp.payment_request.page,l=new FormData;l.append("invoice_number",e),l.append("attachment",t,t.name),n.a.post("".concat(o.b.url,"/api/provider/card/payment/request"),l,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a(T(!1)),200===e.data.code?(a(S()),a(R(c)),a(i.j({message:e.data.message,variant:"success"}))):a(i.j({message:e.data.message,variant:"error"})),a(R(c))})}}function T(e){return{type:N,payload:e}}var x="[CARD APP] GET_CARD_PAYMENT_HISTORIES",H="[CARD APP] CARD_PAYMENT_HISTORIES_CHANGE_PAGE",L="[CARD APP] LOADING_CARD_PAYMENT_HISTORIES";function k(e){return function(t){var a={"page[number]":e.current_page};e.filters&&e.filters.forEach(function(e){var t="filter["+e.value.filterType+"-"+e.id+"]",r=e.value.filterValue;r.length>0&&(a[t]=r)}),n.a.get("".concat(o.b.url,"/api/provider/card/payment/history"),{params:a}).then(function(e){t({type:x,payload:e.data.result}),t(q(!1))})}}function G(e){return{type:H,payload:e}}function q(e){return{type:L,payload:e}}a.d(t,"r",function(){return c}),a.d(t,"q",function(){return l}),a.d(t,"h",function(){return s}),a.d(t,"g",function(){return u}),a.d(t,"f",function(){return p}),a.d(t,"D",function(){return d}),a.d(t,"v",function(){return f}),a.d(t,"u",function(){return b}),a.d(t,"i",function(){return h}),a.d(t,"a",function(){return v}),a.d(t,"b",function(){return _}),a.d(t,"l",function(){return O}),a.d(t,"m",function(){return P}),a.d(t,"p",function(){return E}),a.d(t,"w",function(){return j}),a.d(t,"s",function(){return A}),a.d(t,"A",function(){return F}),a.d(t,"k",function(){return C}),a.d(t,"d",function(){return D}),a.d(t,"e",function(){return w}),a.d(t,"o",function(){return N}),a.d(t,"z",function(){return S}),a.d(t,"y",function(){return R}),a.d(t,"C",function(){return I}),a.d(t,"j",function(){return x}),a.d(t,"c",function(){return H}),a.d(t,"n",function(){return L}),a.d(t,"x",function(){return k}),a.d(t,"t",function(){return G}),a.d(t,"B",function(){return q})},574:function(e,t,a){"use strict";var r=a(41),n=a(4),o=a(566);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var l={validating:!1,exchanging:!1,exchanged:!1,products:[]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.r:return c({},e,{validating:t.payload});case o.h:return c({},e,{exchanging:t.payload});case o.g:return c({},e,{exchanged:t.payload});case o.q:return t.payload?c({},e,{products:t.payload}):c({},e);case o.f:return c({},e,{validating:!1,exchanging:!1,exchanged:!1,products:[]});default:return e}};function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d={loading:!1,card_historyInfoLoading:!1,card_historyCreateLoading:!1,entities:[],card_historyInfo:null,page:{current_page:1,per_page:1,last_page:1,from:1,to:1,total:1,filters:[],sort:{id:"name",desc:!0},show:"all"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.i:return t.payload?p({},e,{entities:t.payload.data,page:{current_page:t.payload.current_page,per_page:t.payload.per_page,last_page:t.payload.last_page,from:t.payload.from,to:t.payload.to,total:t.payload.total,filters:e.page.filters,sort:e.page.sort,show:e.page.show}}):p({},d);case o.a:return t.payload?p({},e,{page:t.payload,loading:!1}):p({},d);case o.l:return p({},e,{loading:t.payload});case o.b:return t.payload?p({},e,{card_historyInfo:t.payload}):p({},e);case o.m:return p({},e,{card_historyInfoLoading:t.payload});case o.p:return p({},e,{card_historyCreateLoading:t.payload});default:return e}};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y={loading:!1,card_historyInfoLoading:!1,card_historyCreateLoading:!1,info:{total_cards:0,total_payment:0},entities:[],card_historyInfo:null,page:{current_page:1,per_page:1,last_page:1,from:1,to:1,total:1,filters:[],sort:{id:"name",desc:!0},show:"all"}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.k:return t.payload?m({},e,{entities:t.payload.data,page:{current_page:t.payload.current_page,per_page:t.payload.per_page,last_page:t.payload.last_page,from:t.payload.from,to:t.payload.to,total:t.payload.total,filters:e.page.filters,sort:e.page.sort,show:e.page.show}}):m({},y);case o.d:return t.payload?m({},e,{page:t.payload,loading:!1}):m({},y);case o.o:return m({},e,{loading:t.payload});case o.e:return t.payload?m({},e,{info:t.payload}):m({},e);default:return e}};function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _={loading:!1,entities:[],page:{current_page:1,per_page:1,last_page:1,from:1,to:1,total:1,filters:[],sort:{id:"name",desc:!0},show:"all"}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.j:return t.payload?v({},e,{entities:t.payload.data,page:{current_page:t.payload.current_page,per_page:t.payload.per_page,last_page:t.payload.last_page,from:t.payload.from,to:t.payload.to,total:t.payload.total,filters:e.page.filters,sort:e.page.sort,show:e.page.show}}):v({},_);case o.c:return t.payload?v({},e,{page:t.payload,loading:!1}):v({},_);case o.n:return v({},e,{loading:t.payload});default:return e}},P=Object(r.d)({validate:s,card_history:f,payment_request:b,payment_history:O});t.a=P},689:function(e,t,a){"use strict";var r=a(1),n=a(557),o=a(123);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(e,Object(r.a)({defaultTheme:o.a},t))}},702:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(30),i=a(197),c=a(4),l=a(21),s=a(689),u=a(98),p=a(532),d=a(553),f=a(548),g=a(487),m=a(56),y=a(8),b=a(199),h=a(566),v=a(503),_=a(531),O=a(3),P=a(14);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var A=Object(s.a)(function(e){return{root:{display:"flex",flexFlow:"column",height:"100%"},rootHeader:{flexGrow:0,flexShrink:1,flexBasis:"auto",marginTop:20,marginBottom:20,marginLeft:20,marginRight:20},rootContent:{display:"block",flexGrow:1,flexShrink:1,flexBasis:"auto"},table:{height:"100%"},inputStyle:{background:"#75b9e7",color:"#FFFFFF","&:hover":{background:"#75b9e7",color:"#000000"}},inputStyleHighlight:{background:"#36a555",color:"#FFFFFF","&:hover":{background:"#36a555",color:"#FFFFFF"},"&:active":{background:"#36a555"}},icon:{color:"#FFFFFF"},inputAdornment:{color:"#FFFFFF"},labelStyle:{fontsize:14,color:"#FFFFFF"},labelStyleHighlight:{fontsize:14,color:"#FFFFFF"},textField:{marginTop:20,width:200,margin:e.spacing(1),"&:disabled":{background:"#75b9e7"}},invoiceInput:{display:"none"},invoiceButton:{fontSize:12,fontWeight:"bold",height:56,marginTop:20,marginLeft:8,marginRight:8,background:"#36a555",color:"#FFFFFF",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},invoiceIcon:{color:"#FFFFFF",marginLeft:e.spacing(1)},submitButton:{fontSize:12,fontWeight:"bold",height:56,marginTop:20,marginLeft:8,marginRight:8,background:"#b6e74f",color:"#525252",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}});var F=function(e){e.openDeleteAlertHandler;var t=e.openDetailModalHandler,a=A(),o=Object(y.b)(),i=Object(r.useRef)(null),c=Object(y.c)(function(e){return e.CardApp.payment_request.entities}),s=Object(y.c)(function(e){return e.CardApp.payment_request.info}),E=Object(y.c)(function(e){return e.CardApp.payment_request.page}),F=Object(y.c)(function(e){return e.CardApp.payment_request.loading}),C=n.a.useState(null),D=Object(l.a)(C,2),w=D[0],N=(D[1],n.a.useState("")),S=Object(l.a)(N,2),R=S[0],I=S[1],T=n.a.useState(null),x=Object(l.a)(T,2),H=x[0],L=x[1];return Object(r.useEffect)(function(){o(h.B(!0)),o(h.y(E)),o(h.z())},[]),c&&s&&!F?0===s.total_cards?n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full mt-32"},n.a.createElement(u.a,{color:"textSecondary",variant:"h5"},"No hay tarjetas pendientes de pago")):w?n.a.createElement(m.a,{to:w}):n.a.createElement("div",{className:a.root},n.a.createElement("div",{className:a.rootHeader},n.a.createElement(v.a,{label:"Cantidad de Tarjetas",id:"filled-start-adornment",className:a.textField,InputProps:{startAdornment:n.a.createElement(_.a,{position:"start",className:a.inputAdornment},n.a.createElement(p.a,{color:"action",className:a.icon},"credit_card")),className:a.inputStyle,readOnly:!0},InputLabelProps:{className:a.labelStyle},value:s.total_cards,variant:"filled",readOnly:!0}),n.a.createElement(v.a,{label:"Monto a pagar",id:"filled-start-adornment",className:a.textField,InputProps:{startAdornment:n.a.createElement(_.a,{position:"start",className:a.inputAdornment},n.a.createElement(p.a,{color:"action",className:a.icon},"attach_money")),className:a.inputStyle},InputLabelProps:{className:a.labelStyle},value:s.total_payment,variant:"filled",readOnly:!0}),n.a.createElement(v.a,{label:"N\xfamero de Factura *",id:"filled-start-adornment",className:a.textField,InputProps:{startAdornment:n.a.createElement(_.a,{position:"start",className:a.inputAdornment},n.a.createElement(p.a,{color:"action",className:a.icon},"insert_drive_file")),className:a.inputStyleHighlight},InputLabelProps:{className:a.labelStyleHighlight},value:R,variant:"filled",onChange:function(e){var t=e.target.value;I(t)}}),n.a.createElement("input",{accept:"*",className:a.invoiceInput,id:"invoice-upload-input",type:"file",onChange:function(e){return function(e){e.target&&e.target.files&&e.target.files[0]&&L(e.target.files[0]),i.value=null}(e)},ref:function(e){i=e}}),n.a.createElement("label",{htmlFor:"invoice-upload-input"},n.a.createElement(d.a,{size:"small",component:"span",variant:"contained",color:"default",className:a.invoiceButton},"Sub\xed la factura",n.a.createElement(p.a,{color:"action",className:a.invoiceIcon},"cloud_upload"))),n.a.createElement(d.a,{size:"small",component:"span",variant:"contained",color:"default",className:a.submitButton,onClick:function(){0===R.length?o(P.j({message:"El N\xfamero de Factura es requerido",variant:"error"})):o(H?h.C(R,H):P.j({message:"La Factura es requerida",variant:"error"}))}},"Solicit\xe1 el pago")),n.a.createElement("div",{className:a.rootContent},n.a.createElement(b.b,{className:Object(O.a)(a.table,"-striped -highlight overflow-hidden pl-2"),data:c,pages:E.last_page,pageSizeOptions:[E.per_page],manual:!0,columns:[{Header:"C\xf3digo",accessor:"number",filterable:!0,sortable:!0},{Header:"C\xf3digo Impreso",accessor:"custom_number",filterable:!0,sortable:!0},{Header:"Producto",accessor:"used_on_product.name",filterable:!0,sortable:!1},{Header:"Monto de Pago",accessor:"used_on_product.internal_price",Cell:function(e){return n.a.createElement(u.a,null,"$ ",e.value)},filterable:!0,sortable:!1,className:"justify-center",width:120},{Header:"Descuento",accessor:"used_on_product.internal_benefit_discount",Cell:function(e){return n.a.createElement(u.a,null,e.value,"%")},filterable:!0,sortable:!1,className:"justify-center",width:120},{Header:"Monto de Pago",accessor:"price_to_pay",Cell:function(e){return n.a.createElement(u.a,null,"$ ",e.value)},filterable:!0,sortable:!1,className:"justify-center",width:120},{Header:"Estado de Pago",accessor:"",Cell:function(e){return n.a.createElement(u.a,null,e.original.provider_transaction&&e.original.provider_transaction.paid?"Abonado":"Pendiente")},className:"justify-center",filterable:!1,sortable:!1,width:120},{Header:"Fecha de Pago",accessor:"provider_transaction.date_paid",Cell:function(e){return n.a.createElement(u.a,null,e.original.provider_transaction&&e.original.provider_transaction.paid?e.value:"")},filterable:!0,sortable:!1,className:"justify-center",width:120},{Header:"Ref. de Pago",accessor:"provider_transaction.id",Cell:function(e){return n.a.createElement(u.a,null,e.original.provider_transaction_id?e.value:"")},filterable:!0,sortable:!1,className:"justify-center",width:120},{Header:"Factura",accessor:"provider_transaction.reference_id",Cell:function(e){return n.a.createElement(u.a,null,e.original.provider_transaction&&e.original.provider_transaction.reference_file&&e.original.provider_transaction.reference_id?e.value:"Pendiente")},filterable:!0,sortable:!1,className:"justify-center",width:120},{Header:"",accessor:"",Cell:function(e){return e.original.provider_transaction_id?n.a.createElement(f.a,{title:"Descargar"},n.a.createElement(g.a,{size:"small","aria-label":"Descargar",onClick:function(){t(e.value)}},n.a.createElement(p.a,{color:"action",className:"text-20"},"cloud_download"))):null},filterable:!1,sortable:!1,className:"justify-center",width:60}],defaultPageSize:0===c.length?5:c.length,noDataText:"No hay items para mostrar",loading:F,onFetchData:function(e,t){var a=e.page+1,r=j({},E);r.current_page=a,o(h.y(r))},onFilteredChange:function(e){var t=j({},E);t.filters=e,o(h.y(t))},onSortedChange:function(e){var t=j({},E);t.sort=e[0],o(h.y(t))}}))):n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full mt-32"},n.a.createElement(u.a,{color:"textSecondary",variant:"h5"},"Cargando"))},C=a(574);t.default=Object(i.a)("CardApp",C.a)(function(){var e=Object(r.useRef)(null);return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.m,{classes:{contentWrapper:"h-full",content:"flex flex-col h-full",header:"min-h-60 h-60",contentToolbar:"mt-32 mb-32 pt-32 pb-32"},header:n.a.createElement("div",{className:"flex flex-1 items-center justify-between p-20"},n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("h4",null,"Solicitud de Pago"))),content:n.a.createElement(F,null),innerScroll:!0,sidebarInner:!0,ref:e}))})}}]);