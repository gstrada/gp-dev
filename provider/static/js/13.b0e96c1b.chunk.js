(window["webpackJsonpfuse-react-app"]=window["webpackJsonpfuse-react-app"]||[]).push([[13],{566:function(e,t,a){"use strict";var r=a(35),n=a.n(r),o=a(38),c=a(14),l="[CARD APP] VALIDATING",i="[CARD APP] SET_PRODUCTS",u="[CARD APP] EXCHANGING",s="[CARD APP] EXCHANGED",p="[CARD APP] CLEAR";function d(e,t){return function(a,r){a(b()),a(g(!0)),a(y(!1)),a(m(!1)),n.a.post("".concat(o.b.url,"/api/provider/card/validate"),{card:e,cvv:t}).then(function(e){a(g(!1)),200===e.data.code?(a(c.j({message:e.data.message,variant:"success"})),a({type:i,payload:e.data.result})):a(c.j({message:e.data.message,variant:"error"}))})}}function f(e,t,a){return function(r,l){r(y(!0)),r(m(!1)),n.a.post("".concat(o.b.url,"/api/provider/card/exchange"),{card:e,cvv:t,product_id:a}).then(function(e){r(y(!1)),200===e.data.code?(r(m(!0)),r(c.j({message:e.data.message,variant:"success"}))):r(c.j({message:e.data.message,variant:"error"}))})}}function g(e){return{type:l,payload:e}}function y(e){return{type:u,payload:e}}function m(e){return{type:s,payload:e}}function b(){return{type:p,payload:[]}}a(4);var O="[CARD APP] GET_CARD_HISTORIES",h="[CARD APP] CARD_HISTORIES_CHANGE_PAGE",_="[CARD APP] CARD_HISTORIES_INFO",v="[CARD APP] LOADING_CARD_HISTORIES",P="[CARD APP]  LOADING_CARD_HISTORY_INFO",j="[CARD APP]  LOADING_METHOD_CREATE";function A(e){return function(t){var a={"page[number]":e.current_page};e.filters&&e.filters.forEach(function(e){var t="filter["+e.value.filterType+"-"+e.id+"]",r=e.value.filterValue;r.length>0&&(a[t]=r)}),n.a.get("".concat(o.b.url,"/api/provider/card/histories"),{params:a}).then(function(e){t({type:O,payload:e.data.result}),t(D(!1))})}}function E(e){return{type:h,payload:e}}function D(e){return{type:v,payload:e}}var C="[CARD APP] GET_CARD_PAYMENT_REQUESTS",w="[CARD APP] CARD_PAYMENT_REQUESTS_CHANGE_PAGE",R="[CARD APP] CARD_PAYMENT_REQUESTS_INFO",S="[CARD APP] LOADING_CARD_PAYMENT_REQUESTS";function N(){return function(e,t){n.a.get("".concat(o.b.url,"/api/provider/card/payment/request-info")).then(function(t){200===t.data.code?e({type:R,payload:t.data.result}):e(c.j({message:t.data.message,variant:"error"}))})}}function I(e){return function(t){var a={"page[number]":e.current_page};e.filters&&e.filters.forEach(function(e){var t="filter["+e.value.filterType+"-"+e.id+"]",r=e.value.filterValue;r.length>0&&(a[t]=r)}),n.a.get("".concat(o.b.url,"/api/provider/card/payment/pending-cards"),{params:a}).then(function(e){t({type:C,payload:e.data.result}),t(H(!1))})}}function T(e,t){return function(a,r){a(H(!0));var l=r().CardApp.payment_request.page,i=new FormData;i.append("invoice_number",e),i.append("attachment",t,t.name),n.a.post("".concat(o.b.url,"/api/provider/card/payment/request"),i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a(H(!1)),200===e.data.code?(a(N()),a(I(l)),a(c.j({message:e.data.message,variant:"success"}))):a(c.j({message:e.data.message,variant:"error"})),a(I(l))})}}function H(e){return{type:S,payload:e}}var x="[CARD APP] GET_CARD_PAYMENT_HISTORIES",G="[CARD APP] CARD_PAYMENT_HISTORIES_CHANGE_PAGE",F="[CARD APP] LOADING_CARD_PAYMENT_HISTORIES";function k(e){return function(t){var a={"page[number]":e.current_page};e.filters&&e.filters.forEach(function(e){var t="filter["+e.value.filterType+"-"+e.id+"]",r=e.value.filterValue;r.length>0&&(a[t]=r)}),n.a.get("".concat(o.b.url,"/api/provider/card/payment/history"),{params:a}).then(function(e){t({type:x,payload:e.data.result}),t(M(!1))})}}function L(e){return{type:G,payload:e}}function M(e){return{type:F,payload:e}}a.d(t,"r",function(){return l}),a.d(t,"q",function(){return i}),a.d(t,"h",function(){return u}),a.d(t,"g",function(){return s}),a.d(t,"f",function(){return p}),a.d(t,"D",function(){return d}),a.d(t,"v",function(){return f}),a.d(t,"u",function(){return b}),a.d(t,"i",function(){return O}),a.d(t,"a",function(){return h}),a.d(t,"b",function(){return _}),a.d(t,"l",function(){return v}),a.d(t,"m",function(){return P}),a.d(t,"p",function(){return j}),a.d(t,"w",function(){return A}),a.d(t,"s",function(){return E}),a.d(t,"A",function(){return D}),a.d(t,"k",function(){return C}),a.d(t,"d",function(){return w}),a.d(t,"e",function(){return R}),a.d(t,"o",function(){return S}),a.d(t,"z",function(){return N}),a.d(t,"y",function(){return I}),a.d(t,"C",function(){return T}),a.d(t,"j",function(){return x}),a.d(t,"c",function(){return G}),a.d(t,"n",function(){return F}),a.d(t,"x",function(){return k}),a.d(t,"t",function(){return L}),a.d(t,"B",function(){return M})},574:function(e,t,a){"use strict";var r=a(41),n=a(4),o=a(566);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var i={validating:!1,exchanging:!1,exchanged:!1,products:[]},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.r:return l({},e,{validating:t.payload});case o.h:return l({},e,{exchanging:t.payload});case o.g:return l({},e,{exchanged:t.payload});case o.q:return t.payload?l({},e,{products:t.payload}):l({},e);case o.f:return l({},e,{validating:!1,exchanging:!1,exchanged:!1,products:[]});default:return e}};function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d={loading:!1,card_historyInfoLoading:!1,card_historyCreateLoading:!1,entities:[],card_historyInfo:null,page:{current_page:1,per_page:1,last_page:1,from:1,to:1,total:1,filters:[],sort:{id:"name",desc:!0},show:"all"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.i:return t.payload?p({},e,{entities:t.payload.data,page:{current_page:t.payload.current_page,per_page:t.payload.per_page,last_page:t.payload.last_page,from:t.payload.from,to:t.payload.to,total:t.payload.total,filters:e.page.filters,sort:e.page.sort,show:e.page.show}}):p({},d);case o.a:return t.payload?p({},e,{page:t.payload,loading:!1}):p({},d);case o.l:return p({},e,{loading:t.payload});case o.b:return t.payload?p({},e,{card_historyInfo:t.payload}):p({},e);case o.m:return p({},e,{card_historyInfoLoading:t.payload});case o.p:return p({},e,{card_historyCreateLoading:t.payload});default:return e}};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m={loading:!1,card_historyInfoLoading:!1,card_historyCreateLoading:!1,info:{total_cards:0,total_payment:0},entities:[],card_historyInfo:null,page:{current_page:1,per_page:1,last_page:1,from:1,to:1,total:1,filters:[],sort:{id:"name",desc:!0},show:"all"}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.k:return t.payload?y({},e,{entities:t.payload.data,page:{current_page:t.payload.current_page,per_page:t.payload.per_page,last_page:t.payload.last_page,from:t.payload.from,to:t.payload.to,total:t.payload.total,filters:e.page.filters,sort:e.page.sort,show:e.page.show}}):y({},m);case o.d:return t.payload?y({},e,{page:t.payload,loading:!1}):y({},m);case o.o:return y({},e,{loading:t.payload});case o.e:return t.payload?y({},e,{info:t.payload}):y({},e);default:return e}};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _={loading:!1,entities:[],page:{current_page:1,per_page:1,last_page:1,from:1,to:1,total:1,filters:[],sort:{id:"name",desc:!0},show:"all"}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.j:return t.payload?h({},e,{entities:t.payload.data,page:{current_page:t.payload.current_page,per_page:t.payload.per_page,last_page:t.payload.last_page,from:t.payload.from,to:t.payload.to,total:t.payload.total,filters:e.page.filters,sort:e.page.sort,show:e.page.show}}):h({},_);case o.c:return t.payload?h({},e,{page:t.payload,loading:!1}):h({},_);case o.n:return h({},e,{loading:t.payload});default:return e}},P=Object(r.d)({validate:u,card_history:f,payment_request:b,payment_history:v});t.a=P},689:function(e,t,a){"use strict";var r=a(1),n=a(557),o=a(123);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(e,Object(r.a)({defaultTheme:o.a},t))}},703:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(30),c=a(197),l=a(4),i=a(21),u=a(689),s=a(98),p=a(548),d=a(487),f=a(532),g=a(56),y=a(8),m=a(199),b=a(566);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _=Object(u.a)(function(e){return{root:{}}});var v=function(e){e.openDeleteAlertHandler,e.openDetailModalHandler,_();var t=Object(y.b)(),a=Object(y.c)(function(e){return e.CardApp.payment_history.entities}),c=Object(y.c)(function(e){return e.CardApp.payment_history.page}),l=Object(y.c)(function(e){return e.CardApp.payment_history.loading}),u=n.a.useState(null),O=Object(i.a)(u,2),v=O[0];return O[1],Object(r.useEffect)(function(){t(b.B(!0)),t(b.x(c))},[]),!a||l?n.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full mt-32"},n.a.createElement(s.a,{color:"textSecondary",variant:"h5"},"Cargando")):v?n.a.createElement(g.a,{to:v}):n.a.createElement(o.a,{animation:"transition.fadeIn",delay:300},n.a.createElement(m.b,{className:"-striped -highlight h-full overflow-hidden pl-2",data:a,pages:c.last_page,pageSizeOptions:[c.per_page],manual:!0,columns:[{Header:"Factura",accessor:"reference_id",Cell:function(e){return n.a.createElement(s.a,null,e.original.reference_file&&e.original.reference_id?e.value:"Pendiente")},filterable:!0,sortable:!1,className:"justify-center"},{Header:"Ref. de Pago",accessor:"id",Cell:function(e){return n.a.createElement(s.a,null,e.value)},filterable:!0,sortable:!1,className:"justify-center"},{Header:"Fecha de Solicitud",accessor:"created_at",Cell:function(e){return n.a.createElement(s.a,null,e.value)},filterable:!0,sortable:!1,className:"justify-center"},{Header:"Monto de Pago",accessor:"amount",Cell:function(e){return n.a.createElement(s.a,null,"$ ",e.value)},filterable:!0,sortable:!1,className:"justify-center"},{Header:"Fecha de Pago",accessor:"date_paid",Cell:function(e){return n.a.createElement(s.a,null,e.value)},filterable:!0,sortable:!1,className:"justify-center"},{Header:"Estado de Pago",accessor:"paid",Cell:function(e){return n.a.createElement(s.a,null,1===e.value?"Abonado":"Pendiente")},className:"justify-center",filterable:!1,sortable:!1,width:120},{Header:"Fac.",accessor:"",Cell:function(e){return e.original.reference_file?n.a.createElement(p.a,{title:"Descargar Factura"},n.a.createElement(d.a,{size:"small","aria-label":"Descargar Factura",onClick:function(){window.open(e.original.referenceFileUrl,"_blank")}},n.a.createElement(f.a,{color:"action",className:"text-20"},"cloud_download"))):null},filterable:!1,sortable:!1,className:"justify-center",width:60},{Header:"Comp.",accessor:"",Cell:function(e){return e.original.transaction_file?n.a.createElement(p.a,{title:"Descargar Comprobante"},n.a.createElement(d.a,{size:"small","aria-label":"Descargar Comprobante",onClick:function(){window.open(e.original.transactionFileUrl,"_blank")}},n.a.createElement(f.a,{color:"action",className:"text-20"},"cloud_download"))):null},filterable:!1,sortable:!1,className:"justify-center",width:60}],defaultPageSize:0===a.length?5:a.length,noDataText:"No hay items para mostrar",loading:l,onFetchData:function(e,a){var r=e.page+1,n=h({},c);n.current_page=r,t(b.x(n))},onFilteredChange:function(e){var a=h({},c);a.filters=e,t(b.t(a))},onSortedChange:function(e){var a=h({},c);a.sort=e[0],t(b.t(a))}}))},P=a(574);t.default=Object(c.a)("CardApp",P.a)(function(){var e=Object(r.useRef)(null);return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.m,{classes:{contentWrapper:"h-full",content:"flex flex-col h-full",header:"min-h-60 h-60",contentToolbar:"mt-32 mb-32 pt-32 pb-32"},header:n.a.createElement("div",{className:"flex flex-1 items-center justify-between p-20"},n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("h4",null,"Historial de Pago"))),content:n.a.createElement(v,null),innerScroll:!0,sidebarInner:!0,ref:e}))})}}]);